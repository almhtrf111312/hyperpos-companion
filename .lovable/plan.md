

# إضافة حقل رقم الهاتف الإلزامي في صفحة التسجيل

## الهدف
إضافة حقل رقم هاتف إلزامي عند إنشاء حساب جديد، مع التحقق من صحة الرقم (دعم الأرقام السورية والتركية والعراقية).

## التغييرات

### 1. صفحة التسجيل (`src/pages/Signup.tsx`)
- إضافة حقل رقم الهاتف بين حقل الاسم والبريد الإلكتروني
- إضافة دالة `validatePhone` تتحقق من:
  - الرقم يبدأ بـ `+` أو `0` أو رقم
  - الطول بين 9 و 15 رقم (بعد حذف المسافات والشرطات)
  - دعم الصيغ: `+963 9XX XXX XXX` (سوريا)، `09XXXXXXXX`، `+90...` (تركيا)، `+964...` (العراق)
- عرض رسالة خطأ واضحة إذا كان الرقم غير صالح
- تمرير رقم الهاتف إلى دالة `signUp`

### 2. دالة المصادقة (`src/hooks/use-auth.tsx`)
- تعديل `signUp` لقبول `phone` كمعامل إضافي
- تخزين رقم الهاتف في `user_metadata` عند التسجيل
- تحديث واجهة `signUp` من `(email, password, fullName)` إلى `(email, password, fullName, phone)`

### 3. دالة إنشاء الملف الشخصي (`handle_new_user` trigger)
- تعديل الـ trigger في قاعدة البيانات ليقرأ `phone` من `raw_user_meta_data` ويحفظه في جدول `profiles`

### 4. ملف الترجمة (`src/lib/i18n.ts`)
- إضافة مفاتيح الترجمة:
  - `auth.phone`: "رقم الهاتف" / "Phone Number" / "Telefon Numarasi"
  - `auth.invalidPhone`: "رقم الهاتف غير صالح. يرجى إدخال رقم صحيح" / ...
  - `auth.phonePlaceholder`: "+963 9XX XXX XXX"

### قواعد التحقق من الرقم

```text
الأرقام المقبولة:
- سوريا: +963 9XX XXX XXX (10 أرقام بعد الكود) أو 09XXXXXXXX
- تركيا: +90 5XX XXX XXXX (10 أرقام بعد الكود)
- العراق: +964 7XX XXX XXXX
- أي رقم دولي بطول 9-15 رقم

الأرقام المرفوضة:
- أقل من 9 أرقام
- أكثر من 15 رقم
- أحرف أو رموز غير (+، -، مسافة)
```

