

## خطة: تحسين نافذة الشرح التعليمية وإضافة خطوات جديدة

### المشاكل الحالية
1. حجم النافذة (320px) كبير على الجوال ويغطي الأزرار المشروحة
2. الحركة بين الخطوات ليست سلسة بما يكفي
3. خطوات الجولة محدودة (7-8 خطوات فقط) ولا تشمل أقسام مهمة

---

### التغييرات المطلوبة

#### 1. تصغير نافذة الشرح وتحسين التموضع
- تقليل عرض البطاقة من 320px الى 280px على الجوال و 300px على سطح المكتب
- تصغير الخطوط والحشو الداخلي (padding) لتقليل الارتفاع
- تحسين خوارزمية `calculatePosition` لضمان عدم تغطية العنصر المشروح:
  - فحص جميع الاتجاهات الأربعة (أسفل، أعلى، يمين، يسار) واختيار الأفضل
  - إضافة مسافة آمنة أكبر بين النافذة والعنصر المُضاء

#### 2. تحسين سلاسة الحركة
- استخدام `transition` أنعم مع `ease-in-out` بدل `ease-out`
- تأخير مناسب بين إخفاء البطاقة وإظهارها في الموقع الجديد
- منع أي قفز مفاجئ بإخفاء البطاقة أولاً ثم إظهارها بعد استقرار الموقع

#### 3. إضافة خطوات جديدة للجولة
إضافة `tourId` لعناصر القائمة الجانبية التالية وخطوات شرح جديدة:

| الخطوة | العنصر | الشرح |
|--------|--------|-------|
| التقارير | رابط التقارير في القائمة | شرح قسم التقارير والإحصائيات |
| الفواتير | رابط الفواتير | شرح عرض وإدارة الفواتير |
| المنتجات | رابط المنتجات | شرح إدارة المنتجات والمخزون |
| العملاء والديون | رابط العملاء | شرح إدارة العملاء وتتبع الديون |
| المصروفات | رابط المصروفات | شرح تسجيل المصروفات |

---

### التفاصيل التقنية

#### الملفات المعدلة

| الملف | النوع |
|-------|-------|
| `src/components/onboarding/OnboardingTour.tsx` | تعديل - تصغير البطاقة + تحسين التموضع + إضافة خطوات |
| `src/components/layout/Sidebar.tsx` | تعديل - إضافة `tourId` للعناصر الجديدة (reports, invoices, products, customers, expenses) |
| `src/lib/i18n.ts` | تعديل - إضافة ترجمات الخطوات الجديدة بالـ 5 لغات |

#### تفاصيل التموضع المحسّن

```text
الخوارزمية الجديدة:
1. حساب المساحة المتاحة في كل اتجاه (أعلى، أسفل، يمين، يسار)
2. اختيار الاتجاه الذي يوفر أكبر مساحة
3. التأكد من عدم خروج البطاقة خارج الشاشة
4. على الجوال: تفضيل الأسفل/الأعلى دائماً (لأن العرض محدود)
5. للقائمة الجانبية: تفضيل اليمين (LTR) أو اليسار (RTL)
```

#### ترتيب الخطوات النهائي

```text
القائمة الجانبية (سطح المكتب فقط)
  -> نقطة البيع
  -> لوحة التحكم  
  -> الفواتير (جديد)
  -> المنتجات (جديد)
  -> العملاء والديون (جديد)
  -> المصروفات (جديد)
  -> التقارير (جديد)
  -> الإعدادات
انتقال لنقطة البيع:
  -> شبكة المنتجات
  -> البحث والتصنيفات
  -> سلة المشتريات / زر السلة
```
