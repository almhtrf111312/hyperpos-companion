

# تخصيص إعدادات الصيدلية (أصناف + حقول)

## المشكلة
عند اختيار نوع المتجر "صيدلية"، الأصناف والحقول الحالية لا تتناسب مع احتياجات الصيدلية الفعلية. كما أن حقل "رقم التشغيلة" (Batch/Lot Number) غير موجود في النظام.

## التغييرات المطلوبة

### 1. تحديث أصناف الصيدلية الافتراضية
**الملف:** `src/lib/store-type-config.ts`

الأصناف الحالية:
```
مسكنات، مضادات حيوية، فيتامينات، أدوية قلب وضغط، أدوية سكري، مستحضرات تجميل، مستلزمات طبية
```

الأصناف الجديدة:
```
أدوية، مستحضرات تجميل، مكملات، عناية بالبشرة، مستلزمات طبية
```

### 2. إضافة حقل "رقم التشغيلة" (Batch Number) كحقل جديد في النظام

**الملف:** `src/lib/product-fields-config.ts`
- إضافة `batchNumber: boolean` إلى واجهة `ProductFieldsConfig`
- إضافة القيمة الافتراضية لكل نوع متجر (مفعّل فقط للصيدلية)
- إضافة التسمية في `FIELD_LABELS`

### 3. تحديث حقول الصيدلية الافتراضية
**الملف:** `src/lib/product-fields-config.ts`

الحقول المفعّلة للصيدلية:
- تاريخ الصلاحية (expiryDate): مفعّل
- رقم التشغيلة (batchNumber): مفعّل -- جديد
- سعر الجملة (wholesalePrice): مفعّل
- الحد الأدنى للمخزون (minStockLevel): مفعّل
- الرقم التسلسلي: معطّل
- الضمان: معطّل
- المقاس واللون: معطّل

### 4. إضافة حقل رقم التشغيلة في نماذج المنتجات

**الملفات:**
- `src/pages/Products.tsx` -- إضافة حقل الإدخال في نموذج إضافة/تعديل المنتج (مشروط بـ `fieldsConfig.batchNumber`)
- `src/components/products/PurchaseInvoiceItemForm.tsx` -- إضافة نفس الحقل في نموذج فاتورة الشراء

### 5. حفظ رقم التشغيلة في السحابة

**الملف:** `src/lib/cloud/products-cloud.ts`
- إضافة `batchNumber` إلى الحقول المخزنة في `custom_fields` (JSONB) مثل serialNumber و warranty

### 6. إضافة الترجمات

**الملف:** `src/lib/i18n.ts`
- `products.batchNumber`: "رقم التشغيلة" / "Batch Number" / "Parti Numarasi"

### 7. إضافة الحقل في إعدادات الحقول

**الملف:** `src/components/settings/ProductFieldsSection.tsx`
- سيظهر تلقائياً لأنه يعتمد على `FIELD_LABELS` الموجود في `product-fields-config.ts`

## ملاحظة
هذا التغيير خاص بالصيدلية فقط. سيتم تطبيق تغييرات أنواع المتاجر الأخرى تباعاً حسب طلبك.
