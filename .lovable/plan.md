

## خطة التنفيذ: زر "مزامنة الآن" الدائم + تحسينات وضع الألبسة

### الجزء الأول: زر "مزامنة الآن" الدائم (لجميع أنواع المحلات)

**المشكلة الحالية:** زر المزامنة في `SyncStatusMenu` يظهر فقط عندما توجد عمليات معلقة (`pendingCount > 0`). المستخدم يريد زر مزامنة يدوي دائم الظهور مع إشعار واضح بالنجاح أو الفشل.

**التعديل:**
- في ملف `src/components/layout/SyncStatusMenu.tsx`: إزالة شرط `pendingCount > 0` من زر "مزامنة الآن" ليظهر دائماً عندما يكون المستخدم متصلاً
- تحسين إشعارات النجاح والفشل (موجودة أصلاً في CloudSyncProvider لكن سيتم التأكد من وضوحها)

---

### الجزء الثاني: تحسينات وضع الألبسة (Clothing Mode)

**الوضع الحالي:** وضع الألبسة موجود جزئياً - حقول الحجم واللون ونوع القماش تظهر عبر `fieldsConfig.sizeColor` و `fieldsConfig.fabricType`. التصنيفات الافتراضية موجودة (رجالي، نسائي، أطفال، أحذية، حقائب).

**التحسينات المقترحة بناءً على تحليلك:**

#### أ. نموذج إضافة المنتج
- الحقول الظاهرة: اسم الصنف، التصنيف، سعر البيع، سعر الجملة، صورة، الباركود + القارئ، الأحجام (S/M/L/XL/XXL)، الألوان، نوع القماش، الكمية
- الحقول المخفية: تاريخ الصلاحية، الرقم التسلسلي، الضمان، رقم التشغيلة، إعدادات الوحدات المزدوجة
- تحسين حقل الحجم: تحويله من حقل نصي حر الى أزرار اختيار متعدد (S, M, L, XL, XXL, 36-46) لتسهيل الإدخال

#### ب. قائمة المنتجات
- إضافة عمود "الأحجام المتاحة" و"الألوان المتاحة" في عرض الجدول
- إبقاء عمود الكمية والباركود (على عكس وضع المخبز)

#### ج. نقطة البيع
- عند إضافة صنف للسلة: عرض مربع حوار لاختيار الحجم واللون قبل الإضافة
- دعم مسح الباركود لإضافة المنتج مع الحجم/اللون المرتبط تلقائياً

---

### التفاصيل التقنية

**الملفات المعدلة:**

1. **`src/components/layout/SyncStatusMenu.tsx`**
   - تغيير شرط ظهور زر المزامنة من `isOnline && pendingCount > 0` الى `isOnline` فقط
   - تغيير نص الزر ليعكس حالة "مزامنة الآن" حتى بدون عمليات معلقة

2. **`src/lib/store-type-config.ts`**
   - تحديث `getVisibleSections` للـ clothing: تفعيل sizeColor=true، إبقاء بقية الأقسام معطلة
   - تأكيد التصنيفات: رجالي، نسائي، أطفال، أحذية، حقائب وإكسسوارات

3. **`src/lib/product-fields-config.ts`**
   - تحديث إعدادات clothing الافتراضية: sizeColor=true, fabricType=true, wholesalePrice=true, barcode=true
   - تعطيل: expiryDate, serialNumber, warranty, batchNumber

4. **`src/pages/Products.tsx`**
   - تحسين حقول الحجم واللون لتكون أزرار اختيار سريعة بدل حقل نص حر
   - عرض الأحجام والألوان في بطاقات المنتجات وعرض الجدول عندما يكون sizeColor مفعلاً

**لا توجد تغييرات في قاعدة البيانات** - حقول size و color موجودة أصلاً في custom_fields للمنتجات.

