
# خطة إضافة زر حفظ عائم وزر تراجع في الإعدادات

## الهدف
استبدال جميع أزرار الحفظ المتفرقة في صفحة الإعدادات بزر حفظ واحد عائم (floating) يظل مرئيا أثناء التمرير، مع زر تراجع بجانبه يعيد الإعدادات لحالتها عند دخول الصفحة.

## كيف سيعمل
1. عند دخول صفحة الإعدادات، يتم حفظ نسخة من جميع الإعدادات الحالية (snapshot)
2. عند تعديل أي إعداد، يظهر شريط عائم أسفل الشاشة يحتوي على:
   - زر "حفظ" لحفظ جميع التغييرات
   - زر "تراجع" لإعادة الإعدادات كما كانت عند الدخول
3. يختفي الشريط عندما لا توجد تغييرات

## الأزرار التي سيتم إزالتها
- زر الحفظ في رأس صفحة الإعدادات (سطر 1328)
- زر "حفظ العملات" في تبويب العملات (سطر 902-905)

## التفاصيل التقنية

### 1. تعديل `Settings.tsx`
- حفظ snapshot للإعدادات عند mount باستخدام `useRef`
- إضافة دالة `hasUnsavedChanges()` تقارن الإعدادات الحالية بالـ snapshot
- إضافة دالة `handleRevert()` تعيد جميع الإعدادات من الـ snapshot
- إزالة زر الحفظ من الـ header
- إزالة زر "حفظ العملات" من تبويب العملات
- إضافة شريط عائم في أسفل الشاشة بـ `fixed bottom-0` مع `z-50`
- الشريط يظهر فقط عند وجود تغييرات (مع انتقال سلس)

### 2. تصميم الشريط العائم
```text
+--------------------------------------------------+
|  [تراجع]                              [حفظ ▶]    |
+--------------------------------------------------+
```
- خلفية شبه شفافة مع blur
- ظل علوي للتمييز
- انتقال سلس عند الظهور والاختفاء
- padding سفلي إضافي لتجنب تداخل مع عناصر النظام على الهاتف

### 3. الإعدادات المتتبعة للتغييرات
- `storeSettings` (اسم المتجر، النوع، الهاتف، العنوان، الشعار)
- `exchangeRates` (أسعار الصرف)
- `currencyNames` (أسماء العملات)
- `notificationSettings` (إعدادات الإشعارات)
- `printSettings` (إعدادات الطباعة)
- `backupSettings` (إعدادات النسخ الاحتياطي)
- `hideMaintenanceSection` (إخفاء قسم الصيانة)

### ملاحظة
- أزرار الحفظ الخاصة بتعديل الاسم والبريد في `ProfileManagement` لن تُزال لأنها تحفظ مباشرة في قاعدة البيانات وليست جزءا من الإعدادات المحلية
- تبويب اللغة في `LanguageSection` له زر حفظ خاص لأنه يغير اتجاه الصفحة فورا

## الملفات المتأثرة

| الملف | التغيير |
|:---|:---|
| `src/pages/Settings.tsx` | إزالة أزرار الحفظ القديمة + إضافة الشريط العائم + منطق الـ snapshot والتراجع |
