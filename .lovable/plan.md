
## خطة: جعل التحديثات تظهر فوراً على جميع الأجهزة

### المشكلة الجذرية

تطبيق Android (APK) يستخدم `webDir: "dist"` في Capacitor، مما يعني أنه يحزم نسخة ثابتة من الكود داخل التطبيق عند البناء. لذلك:
- التحديثات التي نجريها هنا لا تظهر على الـ APK حتى يتم إعادة بنائه
- كل مرة نعدل شيئاً نحتاج بناء APK جديد وتثبيته

### الحل

تحويل الـ APK من وضع "التحزيم المحلي" إلى وضع "التحميل من الإنترنت" بحيث يحمّل الواجهة من `flowpospro.lovable.app` مباشرة، مع دعم العمل أوفلاين عبر Service Worker.

### التعديلات المطلوبة

| الملف | التعديل |
|-------|---------|
| `capacitor.config.json` | إضافة `server.url` للتحميل من الموقع المنشور |

### التفاصيل التقنية

#### تعديل capacitor.config.json

```text
{
  "appId": "com.flowpos.pro",
  "appName": "FlowPOS Pro",
  "webDir": "dist",
  "server": {
    "androidScheme": "https",
    "url": "https://flowpospro.lovable.app",
    "cleartext": false
  },
  "plugins": { ... (بدون تغيير) }
}
```

#### كيف يعمل هذا؟
- عند فتح التطبيق على الهاتف، سيحمّل الواجهة من `flowpospro.lovable.app` بدلاً من الملفات المحلية
- أي تحديث تنشره (Publish) من Lovable سيظهر فوراً على كل الأجهزة
- لا حاجة لبناء APK جديد مع كل تعديل
- التطبيق يحتاج اتصال إنترنت للعمل (وهو موجود أصلاً بسبب المزامنة السحابية)

### خطوات ما بعد التعديل
1. انشر (Publish) التطبيق من Lovable لتحديث `flowpospro.lovable.app`
2. أعد بناء الـ APK مرة واحدة فقط من GitHub Actions
3. بعدها كل التحديثات ستظهر تلقائياً بدون إعادة بناء

### ملاحظة مهمة
الـ APK القديم (المحزم محلياً) لن يتحدث تلقائياً - يجب تثبيت النسخة الجديدة التي تحمّل من الإنترنت مرة واحدة.
